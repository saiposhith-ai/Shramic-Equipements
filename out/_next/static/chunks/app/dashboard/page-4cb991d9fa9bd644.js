(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{63:(e,a,t)=>{"use strict";var s=t(7260);t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}})},1344:(e,a,t)=>{Promise.resolve().then(t.bind(t,6060))},1761:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1847).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},5870:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1847).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6060:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>A});var s=t(5155),r=t(2115),l=t(2078),n=t(2553),i=t(9708),o=t(63),d=t(1733),c=t(6154),m=t(1847);let x=(0,m.A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var h=t(6617);let g=(0,m.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var p=t(1761);let b=(0,m.A)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);var u=t(7586);let y=(0,m.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),j=(0,m.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),N=(0,m.A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),v=(0,m.A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var w=t(5870),f=t(2529);let k={apiKey:"AIzaSyAYEG2XdbuQlGflMwppjtj54ur4jKs89-A",authDomain:"kaamon6363.firebaseapp.com",projectId:"kaamon6363",storageBucket:"kaamon6363.firebasestorage.app",messagingSenderId:"582122881331",appId:"1:582122881331:web:8fac47d3e8646e56a47e46",measurementId:"G-7GFJK5G724"},A=()=>{let e=(0,o.useRouter)(),a=(0,l.Dk)().length?(0,l.Sx)():(0,l.Wp)(k),t=(0,n.xI)(a),m=(0,i.aU)(a),[A,M]=(0,r.useState)(!0),[C,S]=(0,r.useState)([]),[P,q]=(0,r.useState)([]),[E,H]=(0,r.useState)({today:0,month:0,lifetime:0,pending:0}),[R,I]=(0,r.useState)(!0),[z,D]=(0,r.useState)(null),[G,O]=(0,r.useState)("overview"),[_,L]=(0,r.useState)(null);(0,r.useEffect)(()=>{let a=(0,n.hg)(t,async a=>{a?(L(a),await T(a)):e.push("/login")});return()=>a()},[]);let T=async e=>{try{let a;if(I(!0),!(null==e?void 0:e.phoneNumber)&&!(null==e?void 0:e.email)){console.error("No user identifier found"),I(!1);return}let t=(0,i.rJ)(m,"equipments");e.phoneNumber?a=(0,i.P)(t,(0,i._M)("ownerPhoneNumber","==",e.phoneNumber)):e.email&&(a=(0,i.P)(t,(0,i._M)("email","==",e.email)));let s=await (0,i.GG)(a),r=s.docs.map(e=>({id:e.id,...e.data()}));if(S(r),s.docs.length>0){let a=s.docs[0].data();D({name:a.ownerName||e.displayName||"Owner",email:a.email||e.email||"",company:a.companyName||"Individual Owner"})}else D({name:e.displayName||"Owner",email:e.email||"",company:"Individual Owner"});if(r.length>0){let e=(0,i.rJ)(m,"bookings"),a=[];for(let t of r){let s=(0,i.P)(e,(0,i._M)("equipmentId","==",t.id)),r=await (0,i.GG)(s);a=[...a,...r.docs.map(e=>({bookingId:e.id,...e.data()}))]}q(a),V(a)}}catch(e){console.error("Error fetching dashboard data:",e)}finally{I(!1)}},V=e=>{let a=new Date,t=a.getMonth(),s=a.getFullYear(),r=0,l=0,n=0,i=0;e.forEach(e=>{var o,d;let c=e.totalAmount||0,m=(null==(d=e.startDate)||null==(o=d.toDate)?void 0:o.call(d))||new Date(e.startDate);n+=c,"completed"===e.status?(m.toDateString()===a.toDateString()&&(r+=c),m.getMonth()===t&&m.getFullYear()===s&&(l+=c)):("confirmed"===e.status||"ongoing"===e.status)&&(i+=c)}),H({today:r,month:l,lifetime:n,pending:i})},Y={total:C.length,available:C.filter(e=>"Available"===e.currentStatus||!e.currentStatus).length,rented:C.filter(e=>"Rented"===e.currentStatus).length,maintenance:C.filter(e=>"Maintenance"===e.currentStatus).length},B={upcoming:P.filter(e=>"pending"===e.status||"confirmed"===e.status).length,ongoing:P.filter(e=>"ongoing"===e.status).length,completed:P.filter(e=>"completed"===e.status).length},F=async(e,a)=>{try{let t=(0,i.H9)(m,"equipments",e);await (0,i.mZ)(t,{currentStatus:a}),S(C.map(t=>t.id===e?{...t,currentStatus:a}:t))}catch(e){console.error("Error updating equipment status:",e)}},J=async()=>{try{await (0,n.CI)(t),e.push("/login")}catch(e){console.error("Logout error:",e)}};return R?(0,s.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,s.jsx)(d.P.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:(0,s.jsx)(c.A,{className:"w-12 h-12 text-emerald-500"})})}):(0,s.jsxs)("div",{className:"min-h-screen bg-white text-gray-900",children:[(0,s.jsxs)(d.P.aside,{animate:{x:A?0:-300},className:"fixed left-0 top-0 h-screen w-72 bg-gray-50 border-r border-gray-200 p-6 overflow-y-auto z-40",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent",children:"Shramic"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Equipment Management"})]}),(0,s.jsx)("nav",{className:"space-y-2 mb-8",children:[{id:"overview",label:"Overview",icon:x},{id:"equipment",label:"Equipment",icon:h.A},{id:"bookings",label:"Bookings",icon:g},{id:"earnings",label:"Earnings",icon:p.A},{id:"maintenance",label:"Maintenance",icon:b},{id:"messages",label:"Messages",icon:u.A}].map(e=>{let a=e.icon;return(0,s.jsxs)("button",{onClick:()=>O(e.id),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all ".concat(G===e.id?"bg-emerald-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,s.jsx)(a,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:e.label})]},e.id)})}),(0,s.jsxs)("button",{onClick:J,className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-red-600 hover:bg-red-50 transition-all",children:[(0,s.jsx)(y,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Logout"})]})]}),(0,s.jsxs)("div",{className:"transition-all ".concat(A?"ml-72":"ml-0"),children:[(0,s.jsxs)("header",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center z-30 shadow-sm",children:[(0,s.jsx)("button",{onClick:()=>M(!A),className:"p-2 hover:bg-gray-100 rounded-lg",children:A?(0,s.jsx)(j,{className:"w-6 h-6"}):(0,s.jsx)(N,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(v,{className:"w-6 h-6 text-gray-600 cursor-pointer hover:text-gray-900"}),(0,s.jsx)(w.A,{className:"w-6 h-6 text-gray-600 cursor-pointer hover:text-gray-900"}),(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-blue-500 rounded-full"})]})]}),(0,s.jsxs)("main",{className:"p-8 space-y-8",children:[(0,s.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[(0,s.jsxs)("h1",{className:"text-4xl font-bold text-gray-900",children:["Welcome back, ",(null==z?void 0:z.name)||"Owner"]}),(0,s.jsx)("p",{className:"text-gray-600",children:(null==z?void 0:z.company)||"Loading..."})]}),"overview"===G&&(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)(d.P.div,{whileHover:{y:-5},className:"bg-white p-6 rounded-xl border-2 border-gray-200 hover:border-emerald-500 transition-colors shadow-sm",children:[(0,s.jsx)(h.A,{className:"w-8 h-8 text-emerald-600 mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Total Equipment"}),(0,s.jsx)("p",{className:"text-3xl font-bold mt-2 text-gray-900",children:Y.total})]}),(0,s.jsxs)(d.P.div,{whileHover:{y:-5},className:"bg-green-50 p-6 rounded-xl border-2 border-green-200 hover:border-green-500 transition-colors shadow-sm",children:[(0,s.jsx)(f.A,{className:"w-8 h-8 text-green-600 mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Available"}),(0,s.jsx)("p",{className:"text-3xl font-bold mt-2 text-gray-900",children:Y.available})]}),(0,s.jsxs)(d.P.div,{whileHover:{y:-5},className:"bg-blue-50 p-6 rounded-xl border-2 border-blue-200 hover:border-blue-500 transition-colors shadow-sm",children:[(0,s.jsx)(c.A,{className:"w-8 h-8 text-blue-600 mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Rented"}),(0,s.jsx)("p",{className:"text-3xl font-bold mt-2 text-gray-900",children:Y.rented})]}),(0,s.jsxs)(d.P.div,{whileHover:{y:-5},className:"bg-orange-50 p-6 rounded-xl border-2 border-orange-200 hover:border-orange-500 transition-colors shadow-sm",children:[(0,s.jsx)(b,{className:"w-8 h-8 text-orange-600 mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Maintenance"}),(0,s.jsx)("p",{className:"text-3xl font-bold mt-2 text-gray-900",children:Y.maintenance})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{label:"Today",value:E.today,icon:g,bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-600"},{label:"This Month",value:E.month,icon:x,bgColor:"bg-emerald-50",borderColor:"border-emerald-200",textColor:"text-emerald-600"},{label:"Lifetime",value:E.lifetime,icon:x,bgColor:"bg-purple-50",borderColor:"border-purple-200",textColor:"text-purple-600"},{label:"Pending",value:E.pending,icon:p.A,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-600"}].map((e,a)=>{let t=e.icon;return(0,s.jsxs)(d.P.div,{whileHover:{y:-5},className:"".concat(e.bgColor," p-6 rounded-xl border-2 ").concat(e.borderColor," shadow-sm"),children:[(0,s.jsx)(t,{className:"w-8 h-8 mb-4 ".concat(e.textColor)}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:e.label}),(0,s.jsxs)("p",{className:"text-3xl font-bold mt-2 text-gray-900",children:["₹",e.value.toLocaleString()]})]},a)})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{label:"Upcoming Requests",count:B.upcoming,color:"text-blue-600"},{label:"Ongoing Rentals",count:B.ongoing,color:"text-green-600"},{label:"Completed",count:B.completed,color:"text-purple-600"}].map((e,a)=>(0,s.jsxs)(d.P.div,{whileHover:{y:-5},className:"bg-white p-6 rounded-xl border-2 border-gray-200 hover:border-emerald-500 transition-colors shadow-sm",children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:e.label}),(0,s.jsx)("p",{className:"text-4xl font-bold ".concat(e.color),children:e.count})]},a))})]}),"equipment"===G&&(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Your Equipment"}),0===C.length?(0,s.jsxs)("div",{className:"bg-gray-50 p-12 rounded-xl border-2 border-gray-200 text-center",children:[(0,s.jsx)(h.A,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,s.jsx)("p",{className:"text-gray-600",children:"No equipment found. Add your first equipment to get started!"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:C.map((e,a)=>(0,s.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"bg-white rounded-xl p-6 border-2 border-gray-200 hover:border-emerald-500 transition-colors shadow-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-gray-900",children:[e.brand," ",e.modelName]}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm",children:[e.category," - ",e.subCategory]})]}),(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat("Available"===e.currentStatus?"bg-green-100 text-green-700":"Rented"===e.currentStatus?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"),children:e.currentStatus||"Available"})]}),(0,s.jsx)("p",{className:"text-gray-700 text-sm mb-4",children:e.equipmentTitle}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>F(e.id,"Available"),className:"flex-1 px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm transition-colors",children:"Available"}),(0,s.jsx)("button",{onClick:()=>F(e.id,"Maintenance"),className:"flex-1 px-3 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg text-sm transition-colors",children:"Maintenance"})]})]},e.id))})]}),"bookings"===G&&(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Recent Bookings"}),0===P.length?(0,s.jsxs)("div",{className:"bg-gray-50 p-12 rounded-xl border-2 border-gray-200 text-center",children:[(0,s.jsx)(g,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,s.jsx)("p",{className:"text-gray-600",children:"No bookings yet"})]}):(0,s.jsx)("div",{className:"space-y-4",children:P.slice(0,10).map((e,a)=>{var t,r;return(0,s.jsxs)(d.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white p-6 rounded-xl border-2 border-gray-200 flex justify-between items-center hover:border-emerald-500 transition-colors shadow-sm",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:e.renterName||"Renter"}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm",children:["₹",e.totalAmount||0]})]}),(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat("pending"===e.status?"bg-yellow-100 text-yellow-700":"confirmed"===e.status?"bg-blue-100 text-blue-700":"ongoing"===e.status?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:(null!=(t=e.status)?t:"pending").charAt(0).toUpperCase()+(null!=(r=e.status)?r:"pending").slice(1)})]},a)})})]}),"earnings"===G&&(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Earnings & Payouts"}),(0,s.jsx)("div",{className:"bg-white p-8 rounded-xl border-2 border-gray-200 shadow-sm",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:"Total This Month"}),(0,s.jsxs)("p",{className:"text-4xl font-bold text-emerald-600",children:["₹",E.month.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:"Pending Payout"}),(0,s.jsxs)("p",{className:"text-4xl font-bold text-yellow-600",children:["₹",E.pending.toLocaleString()]})]})]})})]}),"maintenance"===G&&(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Maintenance & Service"}),(0,s.jsxs)("div",{className:"bg-gray-50 p-12 rounded-xl border-2 border-gray-200 text-center",children:[(0,s.jsx)(b,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Maintenance logs for your equipment will appear here"})]})]}),"messages"===G&&(0,s.jsxs)(d.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Messages"}),(0,s.jsxs)("div",{className:"bg-gray-50 p-12 rounded-xl border-2 border-gray-200 text-center",children:[(0,s.jsx)(u.A,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Real-time chat with renters coming soon"})]})]})]})]})]})}},6154:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1847).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},6617:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1847).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},7586:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1847).A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])}},e=>{e.O(0,[135,965,240,941,441,493,358],()=>e(e.s=1344)),_N_E=e.O()}]);