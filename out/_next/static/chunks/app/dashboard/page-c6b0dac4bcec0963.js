(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{63:(e,a,t)=>{"use strict";var r=t(7260);t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}})},1344:(e,a,t)=>{Promise.resolve().then(t.bind(t,6060))},1761:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(1847).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},5870:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(1847).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6060:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>M});var r=t(5155),s=t(2115),l=t(2078),n=t(2553),i=t(9708),o=t(63),c=t(1733),d=t(6154),m=t(1847);let x=(0,m.A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var g=t(6617);let h=(0,m.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var p=t(1761);let u=(0,m.A)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);var b=t(7586);let y=(0,m.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),v=(0,m.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),j=(0,m.A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),N=(0,m.A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var f=t(5870),w=t(2529),k=t(6983);let A={apiKey:"AIzaSyAYEG2XdbuQlGflMwppjtj54ur4jKs89-A",authDomain:"kaamon6363.firebaseapp.com",projectId:"kaamon6363",storageBucket:"kaamon6363.firebasestorage.app",messagingSenderId:"582122881331",appId:"1:582122881331:web:8fac47d3e8646e56a47e46",measurementId:"G-7GFJK5G724"},M=()=>{var e,a;let t=(0,o.useRouter)(),m=(0,l.Dk)().length?(0,l.Sx)():(0,l.Wp)(A),M=(0,n.xI)(m),S=(0,i.aU)(m),P=M.currentUser,[q,E]=(0,s.useState)(!0),[C,H]=(0,s.useState)([]),[R,I]=(0,s.useState)([]),[z,D]=(0,s.useState)({today:0,month:0,lifetime:0,pending:0}),[G,L]=(0,s.useState)(!0),[_,O]=(0,s.useState)(null),[T,U]=(0,s.useState)("overview"),[V,Y]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=M.onAuthStateChanged(e=>{e?B():t.push("/login"),Y(!1)});return()=>e()},[]);let B=async()=>{try{if(L(!0),!(null==P?void 0:P.phoneNumber))return;let e=(0,i.rJ)(S,"equipments"),a=(0,i.P)(e,(0,i._M)("ownerPhoneNumber","==",P.phoneNumber)),t=await (0,i.GG)(a),r=t.docs.map(e=>({id:e.id,...e.data()}));if(H(r),t.docs.length>0){let e=t.docs[0].data();O({name:e.ownerName,email:e.email,company:e.companyName||"Individual Owner"})}let s=(0,i.rJ)(S,"bookings"),l=[];for(let e of r){let a=(0,i.P)(s,(0,i._M)("equipmentId","==",e.id)),t=await (0,i.GG)(a);l=[...l,...t.docs.map(e=>({bookingId:e.id,...e.data()}))]}I(l),F(l)}catch(e){console.error("Error fetching dashboard data:",e)}finally{L(!1)}},F=e=>{let a=new Date,t=a.getMonth(),r=a.getFullYear(),s=0,l=0,n=0,i=0;e.forEach(e=>{var o,c;let d=e.totalAmount||0,m=(null==(c=e.startDate)||null==(o=c.toDate)?void 0:o.call(c))||new Date(e.startDate);n+=d,"completed"===e.status?(m.toDateString()===a.toDateString()&&(s+=d),m.getMonth()===t&&m.getFullYear()===r&&(l+=d)):("confirmed"===e.status||"ongoing"===e.status)&&(i+=d)}),D({today:s,month:l,lifetime:n,pending:i})},J={total:C.length,available:C.filter(e=>"Available"===e.currentStatus||!e.currentStatus).length,rented:C.filter(e=>"Rented"===e.currentStatus).length,maintenance:C.filter(e=>"Maintenance"===e.currentStatus).length},K={upcoming:R.filter(e=>"pending"===e.status||"confirmed"===e.status).length,ongoing:R.filter(e=>"ongoing"===e.status).length,completed:R.filter(e=>"completed"===e.status).length},W=async(e,a)=>{try{let t=(0,i.H9)(S,"equipments",e);await (0,i.mZ)(t,{currentStatus:a}),H(C.map(t=>t.id===e?{...t,currentStatus:a}:t))}catch(e){console.error("Error updating equipment status:",e)}},Q=async()=>{try{await (0,n.CI)(M),t.push("/login")}catch(e){console.error("Logout error:",e)}};return G||V?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center",children:(0,r.jsx)(c.P.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:(0,r.jsx)(d.A,{className:"w-12 h-12 text-emerald-500"})})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white",children:[(0,r.jsxs)(c.P.aside,{animate:{x:q?0:-300},className:"fixed left-0 top-0 h-screen w-72 bg-gray-950 border-r border-gray-700 p-6 overflow-y-auto z-40",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-emerald-400 to-blue-400 bg-clip-text text-transparent",children:"Shramic"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Equipment Management"})]}),(0,r.jsx)("nav",{className:"space-y-2 mb-8",children:[{id:"overview",label:"Overview",icon:x},{id:"equipment",label:"Equipment",icon:g.A},{id:"bookings",label:"Bookings",icon:h},{id:"earnings",label:"Earnings",icon:p.A},{id:"maintenance",label:"Maintenance",icon:u},{id:"messages",label:"Messages",icon:b.A}].map(e=>{let a=e.icon;return(0,r.jsxs)("button",{onClick:()=>U(e.id),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all ".concat(T===e.id?"bg-emerald-600 text-white shadow-lg shadow-emerald-600/50":"text-gray-400 hover:text-white hover:bg-gray-800"),children:[(0,r.jsx)(a,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:e.label})]},e.id)})}),(0,r.jsxs)("button",{onClick:Q,className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-red-400 hover:bg-red-950 transition-all",children:[(0,r.jsx)(y,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Logout"})]})]}),(0,r.jsxs)("div",{className:"transition-all ".concat(q?"ml-72":"ml-0"),children:[(0,r.jsxs)("header",{className:"sticky top-0 bg-gray-950 border-b border-gray-700 p-6 flex justify-between items-center z-30",children:[(0,r.jsx)("button",{onClick:()=>E(!q),className:"p-2 hover:bg-gray-800 rounded-lg",children:q?(0,r.jsx)(v,{className:"w-6 h-6"}):(0,r.jsx)(j,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(N,{className:"w-6 h-6 text-gray-400 cursor-pointer hover:text-white"}),(0,r.jsx)(f.A,{className:"w-6 h-6 text-gray-400 cursor-pointer hover:text-white"}),(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-400 to-blue-400 rounded-full"})]})]}),(0,r.jsxs)("main",{className:"p-8 space-y-8",children:[(0,r.jsxs)(c.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[(0,r.jsxs)("h1",{className:"text-4xl font-bold",children:["Welcome back, ",null!=(e=null==_?void 0:_.name)?e:"Owner"]}),(0,r.jsx)("p",{className:"text-gray-400",children:null!=(a=null==_?void 0:_.company)?a:"Loading..."})]}),"overview"===T&&(0,r.jsxs)(c.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)(c.P.div,{whileHover:{y:-5},className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-xl border border-gray-700 hover:border-emerald-500 transition-colors",children:[(0,r.jsx)(g.A,{className:"w-8 h-8 text-emerald-400 mb-4"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Equipment"}),(0,r.jsx)("p",{className:"text-3xl font-bold mt-2",children:J.total})]}),(0,r.jsxs)(c.P.div,{whileHover:{y:-5},className:"bg-gradient-to-br from-green-900/30 to-gray-900 p-6 rounded-xl border border-green-700/50 hover:border-green-500 transition-colors",children:[(0,r.jsx)(w.A,{className:"w-8 h-8 text-green-400 mb-4"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Available"}),(0,r.jsx)("p",{className:"text-3xl font-bold mt-2",children:J.available})]}),(0,r.jsxs)(c.P.div,{whileHover:{y:-5},className:"bg-gradient-to-br from-blue-900/30 to-gray-900 p-6 rounded-xl border border-blue-700/50 hover:border-blue-500 transition-colors",children:[(0,r.jsx)(d.A,{className:"w-8 h-8 text-blue-400 mb-4"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Rented"}),(0,r.jsx)("p",{className:"text-3xl font-bold mt-2",children:J.rented})]}),(0,r.jsxs)(c.P.div,{whileHover:{y:-5},className:"bg-gradient-to-br from-orange-900/30 to-gray-900 p-6 rounded-xl border border-orange-700/50 hover:border-orange-500 transition-colors",children:[(0,r.jsx)(u,{className:"w-8 h-8 text-orange-400 mb-4"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Maintenance"}),(0,r.jsx)("p",{className:"text-3xl font-bold mt-2",children:J.maintenance})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{label:"Today",value:z.today,icon:h,color:"from-blue-600 to-blue-400"},{label:"This Month",value:z.month,icon:x,color:"from-emerald-600 to-emerald-400"},{label:"Lifetime",value:z.lifetime,icon:x,color:"from-purple-600 to-purple-400"},{label:"Pending Payout",value:z.pending,icon:k.A,color:"from-yellow-600 to-yellow-400"}].map((e,a)=>{let t=e.icon;return(0,r.jsxs)(c.P.div,{whileHover:{y:-5},className:"bg-gradient-to-br ".concat(e.color,"/20 p-6 rounded-xl border border-gray-700 hover:border-gray-500 transition-colors"),children:[(0,r.jsx)(t,{className:"w-8 h-8 mb-4 text-".concat(e.color.split("-")[1],"-400")}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:e.label}),(0,r.jsxs)("p",{className:"text-3xl font-bold mt-2",children:["₹",e.value.toLocaleString()]})]},a)})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{label:"Upcoming Requests",count:K.upcoming,color:"text-blue-400"},{label:"Ongoing Rentals",count:K.ongoing,color:"text-green-400"},{label:"Completed",count:K.completed,color:"text-purple-400"}].map((e,a)=>(0,r.jsxs)(c.P.div,{whileHover:{y:-5},className:"bg-gray-800 p-6 rounded-xl border border-gray-700 hover:border-emerald-500 transition-colors",children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-4",children:e.label}),(0,r.jsx)("p",{className:"text-4xl font-bold ".concat(e.color),children:e.count})]},a))})]}),"equipment"===T&&(0,r.jsxs)(c.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Your Equipment"}),(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:C.map((e,a)=>(0,r.jsxs)(c.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"bg-gray-800 rounded-xl p-6 border border-gray-700 hover:border-emerald-500 transition-colors",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-xl font-bold",children:[e.brand," ",e.modelName]}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:[e.category," - ",e.subCategory]})]}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat("Available"===e.currentStatus?"bg-green-500/20 text-green-400":"Rented"===e.currentStatus?"bg-blue-500/20 text-blue-400":"bg-orange-500/20 text-orange-400"),children:e.currentStatus||"Available"})]}),(0,r.jsx)("p",{className:"text-gray-300 text-sm mb-4",children:e.equipmentTitle}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>W(e.id,"Available"),className:"flex-1 px-3 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-sm transition-colors",children:"Available"}),(0,r.jsx)("button",{onClick:()=>W(e.id,"Maintenance"),className:"flex-1 px-3 py-2 bg-orange-600 hover:bg-orange-700 rounded-lg text-sm transition-colors",children:"Maintenance"})]})]},e.id))})]}),"bookings"===T&&(0,r.jsxs)(c.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Recent Bookings"}),(0,r.jsx)("div",{className:"space-y-4",children:R.slice(0,5).map((e,a)=>{var t,s;return(0,r.jsxs)(c.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-gray-800 p-6 rounded-xl border border-gray-700 flex justify-between items-center hover:border-emerald-500 transition-colors",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-semibold",children:e.renterName||"Renter"}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:["₹",e.totalAmount||0]})]}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat("pending"===e.status?"bg-yellow-500/20 text-yellow-400":"confirmed"===e.status?"bg-blue-500/20 text-blue-400":"ongoing"===e.status?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:(null!=(t=e.status)?t:"pending").charAt(0).toUpperCase()+(null!=(s=e.status)?s:"pending").slice(1)})]},a)})})]}),"earnings"===T&&(0,r.jsxs)(c.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Earnings & Payouts"}),(0,r.jsx)("div",{className:"bg-gray-800 p-8 rounded-xl border border-gray-700",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 mb-2",children:"Total This Month"}),(0,r.jsxs)("p",{className:"text-4xl font-bold text-emerald-400",children:["₹",z.month.toLocaleString()]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 mb-2",children:"Pending Payout"}),(0,r.jsxs)("p",{className:"text-4xl font-bold text-yellow-400",children:["₹",z.pending.toLocaleString()]})]})]})})]}),"maintenance"===T&&(0,r.jsxs)(c.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Maintenance & Service"}),(0,r.jsxs)("div",{className:"bg-gray-800 p-8 rounded-xl border border-gray-700 text-center text-gray-400",children:[(0,r.jsx)(u,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:"Maintenance logs for your equipment will appear here"})]})]}),"messages"===T&&(0,r.jsxs)(c.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Messages"}),(0,r.jsxs)("div",{className:"bg-gray-800 p-8 rounded-xl border border-gray-700 text-center text-gray-400",children:[(0,r.jsx)(b.A,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:"Real-time chat with renters coming soon"})]})]})]})]})]})}},6154:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(1847).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},6617:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(1847).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},6983:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(1847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},7586:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(1847).A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])}},e=>{e.O(0,[135,965,240,941,441,493,358],()=>e(e.s=1344)),_N_E=e.O()}]);