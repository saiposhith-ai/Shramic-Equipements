(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{63:(e,t,a)=>{"use strict";var r=a(7260);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},1344:(e,t,a)=>{Promise.resolve().then(a.bind(a,6060))},1761:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},5870:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6060:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var r=a(5155),s=a(2115),l=a(2553),n=a(9708),i=a(63),o=a(1733),c=a(6154),d=a(1847);let m=(0,d.A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var x=a(6617);let g=(0,d.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var h=a(1761);let p=(0,d.A)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);var u=a(7586);let b=(0,d.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),y=(0,d.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),v=(0,d.A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),j=(0,d.A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var N=a(5870),f=a(2529),w=a(6983);let k=()=>{var e,t;let a=(0,i.useRouter)(),[d,k]=(0,s.useState)(null),[A,M]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=(0,l.xI)(),t=(0,n.aU)();k(e),M(t)},[]);let P=null==d?void 0:d.currentUser,[S,q]=(0,s.useState)(!0),[E,C]=(0,s.useState)([]),[H,R]=(0,s.useState)([]),[z,L]=(0,s.useState)({today:0,month:0,lifetime:0,pending:0}),[_,D]=(0,s.useState)(!0),[O,T]=(0,s.useState)(null),[I,G]=(0,s.useState)("overview");(0,s.useEffect)(()=>{if(!P)return void a.push("/login");d&&A&&U()},[P,d,A]);let U=async()=>{try{if(D(!0),!(null==P?void 0:P.phoneNumber)||!A)return;let e=(0,n.rJ)(A,"equipments"),t=(0,n.P)(e,(0,n._M)("ownerPhoneNumber","==",P.phoneNumber)),a=await (0,n.GG)(t),r=a.docs.map(e=>({id:e.id,...e.data()}));if(C(r),a.docs.length>0){let e=a.docs[0].data();T({name:e.ownerName,email:e.email,company:e.companyName||"Individual Owner"})}let s=(0,n.rJ)(A,"bookings"),l=[];for(let e of r){let t=(0,n.P)(s,(0,n._M)("equipmentId","==",e.id)),a=await (0,n.GG)(t);l=[...l,...a.docs.map(e=>({bookingId:e.id,...e.data()}))]}R(l),V(l)}catch(e){console.error("Error fetching dashboard data:",e)}finally{D(!1)}},V=e=>{let t=new Date,a=t.getMonth(),r=t.getFullYear(),s=0,l=0,n=0,i=0;e.forEach(e=>{var o,c;let d=e.totalAmount||0,m=(null==(c=e.startDate)||null==(o=c.toDate)?void 0:o.call(c))||new Date(e.startDate);n+=d,"completed"===e.status?(m.toDateString()===t.toDateString()&&(s+=d),m.getMonth()===a&&m.getFullYear()===r&&(l+=d)):("confirmed"===e.status||"ongoing"===e.status)&&(i+=d)}),L({today:s,month:l,lifetime:n,pending:i})},Y={total:E.length,available:E.filter(e=>"Available"===e.currentStatus||!e.currentStatus).length,rented:E.filter(e=>"Rented"===e.currentStatus).length,maintenance:E.filter(e=>"Maintenance"===e.currentStatus).length},B={upcoming:H.filter(e=>"pending"===e.status||"confirmed"===e.status).length,ongoing:H.filter(e=>"ongoing"===e.status).length,completed:H.filter(e=>"completed"===e.status).length},F=async(e,t)=>{try{let a=(0,n.H9)(A,"equipments",e);await (0,n.mZ)(a,{currentStatus:t}),C(E.map(a=>a.id===e?{...a,currentStatus:t}:a))}catch(e){console.error("Error updating equipment status:",e)}},J=async()=>{try{await (0,l.CI)(d),a.push("/login")}catch(e){console.error("Logout error:",e)}};return _?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 flex items-center justify-center",children:(0,r.jsx)(o.P.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:(0,r.jsx)(c.A,{className:"w-12 h-12 text-emerald-500"})})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white",children:[(0,r.jsxs)(o.P.aside,{animate:{x:S?0:-300},className:"fixed left-0 top-0 h-screen w-72 bg-gray-950 border-r border-gray-700 p-6 overflow-y-auto z-40",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-emerald-400 to-blue-400 bg-clip-text text-transparent",children:"Shramic"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Equipment Management"})]}),(0,r.jsx)("nav",{className:"space-y-2 mb-8",children:[{id:"overview",label:"Overview",icon:m},{id:"equipment",label:"Equipment",icon:x.A},{id:"bookings",label:"Bookings",icon:g},{id:"earnings",label:"Earnings",icon:h.A},{id:"maintenance",label:"Maintenance",icon:p},{id:"messages",label:"Messages",icon:u.A}].map(e=>{let t=e.icon;return(0,r.jsxs)("button",{onClick:()=>G(e.id),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all ".concat(I===e.id?"bg-emerald-600 text-white shadow-lg shadow-emerald-600/50":"text-gray-400 hover:text-white hover:bg-gray-800"),children:[(0,r.jsx)(t,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:e.label})]},e.id)})}),(0,r.jsxs)("button",{onClick:J,className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-red-400 hover:bg-red-950 transition-all",children:[(0,r.jsx)(b,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Logout"})]})]}),(0,r.jsxs)("div",{className:"transition-all ".concat(S?"ml-72":"ml-0"),children:[(0,r.jsxs)("header",{className:"sticky top-0 bg-gray-950 border-b border-gray-700 p-6 flex justify-between items-center z-30",children:[(0,r.jsx)("button",{onClick:()=>q(!S),className:"p-2 hover:bg-gray-800 rounded-lg",children:S?(0,r.jsx)(y,{className:"w-6 h-6"}):(0,r.jsx)(v,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(j,{className:"w-6 h-6 text-gray-400 cursor-pointer hover:text-white"}),(0,r.jsx)(N.A,{className:"w-6 h-6 text-gray-400 cursor-pointer hover:text-white"}),(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-400 to-blue-400 rounded-full"})]})]}),(0,r.jsxs)("main",{className:"p-8 space-y-8",children:[(0,r.jsxs)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-2",children:[(0,r.jsxs)("h1",{className:"text-4xl font-bold",children:["Welcome back, ",null!=(e=null==O?void 0:O.name)?e:"Owner"]}),(0,r.jsx)("p",{className:"text-gray-400",children:null!=(t=null==O?void 0:O.company)?t:"Loading..."})]}),"overview"===I&&(0,r.jsxs)(o.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)(o.P.div,{whileHover:{y:-5},className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-xl border border-gray-700 hover:border-emerald-500 transition-colors",children:[(0,r.jsx)(x.A,{className:"w-8 h-8 text-emerald-400 mb-4"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Equipment"}),(0,r.jsx)("p",{className:"text-3xl font-bold mt-2",children:Y.total})]}),(0,r.jsxs)(o.P.div,{whileHover:{y:-5},className:"bg-gradient-to-br from-green-900/30 to-gray-900 p-6 rounded-xl border border-green-700/50 hover:border-green-500 transition-colors",children:[(0,r.jsx)(f.A,{className:"w-8 h-8 text-green-400 mb-4"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Available"}),(0,r.jsx)("p",{className:"text-3xl font-bold mt-2",children:Y.available})]}),(0,r.jsxs)(o.P.div,{whileHover:{y:-5},className:"bg-gradient-to-br from-blue-900/30 to-gray-900 p-6 rounded-xl border border-blue-700/50 hover:border-blue-500 transition-colors",children:[(0,r.jsx)(c.A,{className:"w-8 h-8 text-blue-400 mb-4"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Rented"}),(0,r.jsx)("p",{className:"text-3xl font-bold mt-2",children:Y.rented})]}),(0,r.jsxs)(o.P.div,{whileHover:{y:-5},className:"bg-gradient-to-br from-orange-900/30 to-gray-900 p-6 rounded-xl border border-orange-700/50 hover:border-orange-500 transition-colors",children:[(0,r.jsx)(p,{className:"w-8 h-8 text-orange-400 mb-4"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Maintenance"}),(0,r.jsx)("p",{className:"text-3xl font-bold mt-2",children:Y.maintenance})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{label:"Today",value:z.today,icon:g,color:"from-blue-600 to-blue-400"},{label:"This Month",value:z.month,icon:m,color:"from-emerald-600 to-emerald-400"},{label:"Lifetime",value:z.lifetime,icon:m,color:"from-purple-600 to-purple-400"},{label:"Pending Payout",value:z.pending,icon:w.A,color:"from-yellow-600 to-yellow-400"}].map((e,t)=>{let a=e.icon;return(0,r.jsxs)(o.P.div,{whileHover:{y:-5},className:"bg-gradient-to-br ".concat(e.color,"/20 p-6 rounded-xl border border-gray-700 hover:border-gray-500 transition-colors"),children:[(0,r.jsx)(a,{className:"w-8 h-8 mb-4 text-".concat(e.color.split("-")[1],"-400")}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:e.label}),(0,r.jsxs)("p",{className:"text-3xl font-bold mt-2",children:["₹",e.value.toLocaleString()]})]},t)})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{label:"Upcoming Requests",count:B.upcoming,color:"text-blue-400"},{label:"Ongoing Rentals",count:B.ongoing,color:"text-green-400"},{label:"Completed",count:B.completed,color:"text-purple-400"}].map((e,t)=>(0,r.jsxs)(o.P.div,{whileHover:{y:-5},className:"bg-gray-800 p-6 rounded-xl border border-gray-700 hover:border-emerald-500 transition-colors",children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-4",children:e.label}),(0,r.jsx)("p",{className:"text-4xl font-bold ".concat(e.color),children:e.count})]},t))})]}),"equipment"===I&&(0,r.jsxs)(o.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Your Equipment"}),(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:E.map((e,t)=>(0,r.jsxs)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-gray-800 rounded-xl p-6 border border-gray-700 hover:border-emerald-500 transition-colors",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-xl font-bold",children:[e.brand," ",e.modelName]}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:[e.category," - ",e.subCategory]})]}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat("Available"===e.currentStatus?"bg-green-500/20 text-green-400":"Rented"===e.currentStatus?"bg-blue-500/20 text-blue-400":"bg-orange-500/20 text-orange-400"),children:e.currentStatus||"Available"})]}),(0,r.jsx)("p",{className:"text-gray-300 text-sm mb-4",children:e.equipmentTitle}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>F(e.id,"Available"),className:"flex-1 px-3 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-sm transition-colors",children:"Available"}),(0,r.jsx)("button",{onClick:()=>F(e.id,"Maintenance"),className:"flex-1 px-3 py-2 bg-orange-600 hover:bg-orange-700 rounded-lg text-sm transition-colors",children:"Maintenance"})]})]},e.id))})]}),"bookings"===I&&(0,r.jsxs)(o.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Recent Bookings"}),(0,r.jsx)("div",{className:"space-y-4",children:H.slice(0,5).map((e,t)=>{var a,s;return(0,r.jsxs)(o.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-gray-800 p-6 rounded-xl border border-gray-700 flex justify-between items-center hover:border-emerald-500 transition-colors",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-semibold",children:e.renterName||"Renter"}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:["₹",e.totalAmount||0]})]}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat("pending"===e.status?"bg-yellow-500/20 text-yellow-400":"confirmed"===e.status?"bg-blue-500/20 text-blue-400":"ongoing"===e.status?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:(null!=(a=e.status)?a:"pending").charAt(0).toUpperCase()+(null!=(s=e.status)?s:"pending").slice(1)})]},t)})})]}),"earnings"===I&&(0,r.jsxs)(o.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Earnings & Payouts"}),(0,r.jsx)("div",{className:"bg-gray-800 p-8 rounded-xl border border-gray-700",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 mb-2",children:"Total This Month"}),(0,r.jsxs)("p",{className:"text-4xl font-bold text-emerald-400",children:["₹",z.month.toLocaleString()]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 mb-2",children:"Pending Payout"}),(0,r.jsxs)("p",{className:"text-4xl font-bold text-yellow-400",children:["₹",z.pending.toLocaleString()]})]})]})})]}),"maintenance"===I&&(0,r.jsxs)(o.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Maintenance & Service"}),(0,r.jsxs)("div",{className:"bg-gray-800 p-8 rounded-xl border border-gray-700 text-center text-gray-400",children:[(0,r.jsx)(p,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:"Maintenance logs for your equipment will appear here"})]})]}),"messages"===I&&(0,r.jsxs)(o.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Messages"}),(0,r.jsxs)("div",{className:"bg-gray-800 p-8 rounded-xl border border-gray-700 text-center text-gray-400",children:[(0,r.jsx)(u.A,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:"Real-time chat with renters coming soon"})]})]})]})]})]})}},6154:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},6617:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},6983:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},7586:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])}},e=>{e.O(0,[135,965,551,941,441,493,358],()=>e(e.s=1344)),_N_E=e.O()}]);