(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{63:(e,t,s)=>{"use strict";var r=s(7260);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},697:(e,t,s)=>{Promise.resolve().then(s.bind(s,3658))},2078:(e,t,s)=>{"use strict";s.d(t,{Dk:()=>r.Dk,Sx:()=>r.Sx,Wp:()=>r.Wp});var r=s(8277);(0,r.KO)("firebase","12.4.0","app")},3658:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(5155),a=s(2115),i=s(2553),l=s(2078),n=s(9708),c=s(63),o=s(1733),d=s(6497);let m=(0,s(1847).A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var x=s(6132),u=s(2529),h=s(6983);let p=(0,l.Dk)().length?(0,l.Sx)():(0,l.Wp)({apiKey:"AIzaSyAYEG2XdbuQlGflMwppjtj54ur4jKs89-A",authDomain:"kaamon6363.firebaseapp.com",projectId:"kaamon6363",storageBucket:"kaamon6363.firebasestorage.app",messagingSenderId:"582122881331",appId:"1:582122881331:web:8fac47d3e8646e56a47e46",measurementId:"G-7GFJK5G724"}),f=(0,i.xI)(p),y=(0,n.aU)(p);function g(){let[e,t]=(0,a.useState)(1),[s,l]=(0,a.useState)("+91"),[p,g]=(0,a.useState)(""),[b,j]=(0,a.useState)(null),[v,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(""),[P,S]=(0,a.useState)(0),[C,E]=(0,a.useState)(""),[R,A]=(0,a.useState)(null),[M,I]=(0,a.useState)("");(0,c.useRouter)();let V=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(w){let e=setTimeout(()=>k(""),5e3);return()=>clearTimeout(e)}},[w]),(0,a.useEffect)(()=>{let e;return P>0&&(e=setTimeout(()=>S(P-1),1e3)),()=>clearTimeout(e)},[P]),(0,a.useEffect)(()=>{if(V.current&&!window.recaptchaVerifier)try{window.recaptchaVerifier=new i.kT(f,V.current,{size:"invisible"}),window.recaptchaVerifier.render()}catch(e){console.error("reCAPTCHA error:",e)}},[]);let W=async e=>{e.preventDefault(),k(""),N(!0),E("Sending verification code...");try{let e=s.replace(/[\s\-()]/g,"");e.startsWith("+")||(e=10===e.length?"+91".concat(e):"+".concat(e));let r=await (0,i.ik)(f,e,window.recaptchaVerifier);j(r),t(2),S(60)}catch(e){k(e.message||"Failed to send verification code. Please try again.")}finally{N(!1)}},L=async e=>{try{N(!0),E("Checking your account status...");let s=(0,n.rJ)(y,"equipments"),r=(0,n.P)(s,(0,n._M)("ownerPhoneNumber","==",e)),a=await (0,n.GG)(r);if(a.empty){k("No account found. Please register first."),t(1),N(!1);return}let i=a.docs[0].data(),l=i.status||"under_review",c=i.email||"";console.log("User status:",l,"Email:",c),"approved"===l?(N(!1),window.location.href="/dashboard"):(I(c),A(l),t(3),N(!1))}catch(e){console.error("Status check error:",e),k("Failed to check account status. Please try again."),t(1),N(!1)}},D=async e=>{e.preventDefault(),k(""),N(!0),E("Verifying code...");try{let e=(await b.confirm(p)).user.phoneNumber||"";await L(e)}catch(e){k("Invalid verification code. Please try again.")}finally{N(!1)}},T=async()=>{if(!(P>0)){k(""),N(!0),E("Resending code...");try{let e=s.replace(/[\s\-()]/g,"");e.startsWith("+")||(e=10===e.length?"+91".concat(e):"+".concat(e));let t=await (0,i.ik)(f,e,window.recaptchaVerifier);j(t),g(""),S(60)}catch(e){k(e.message||"Failed to resend verification code.")}finally{N(!1)}}};return 1===e?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-blue-50 to-purple-50 flex items-center justify-center p-4",children:[(0,r.jsx)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:(0,r.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 space-y-8",children:[(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)(o.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:200},className:"mx-auto bg-gradient-to-br from-emerald-100 to-blue-100 rounded-full h-20 w-20 flex items-center justify-center",children:(0,r.jsx)(m,{className:"w-10 h-10 text-emerald-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-extrabold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent mb-2",children:"Welcome Back"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Sign in with your mobile number"})]})]}),(0,r.jsxs)("form",{onSubmit:W,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-800",children:"Mobile Number *"}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-emerald-50 to-blue-50 p-6 rounded-2xl border border-emerald-100",children:(0,r.jsx)("input",{type:"tel",value:s,onChange:e=>l(e.target.value.replace(/[^\d+\-\s()]/g,"")),placeholder:"+91 98765 43210",className:"w-full bg-transparent text-lg font-medium outline-none placeholder-gray-400",required:!0})}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"We'll send a 6-digit verification code to this number"})]}),(0,r.jsx)("button",{type:"submit",disabled:v,className:"w-full bg-gradient-to-r from-emerald-600 to-blue-600 hover:from-emerald-700 hover:to-blue-700 text-white font-bold py-4 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:v?(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{children:C})]}):"Send Verification Code"})]}),(0,r.jsx)("div",{className:"text-center text-sm text-gray-500",children:(0,r.jsx)("p",{children:"\xa9 2025 Shramic Networks Pvt Ltd."})})]})}),(0,r.jsx)("div",{ref:V,className:"sr-only"}),(0,r.jsx)(d.N,{children:w&&(0,r.jsx)(o.P.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-4 right-4 z-50 bg-red-500 text-white px-6 py-4 rounded-xl shadow-2xl max-w-md",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(x.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Error"}),(0,r.jsx)("p",{className:"text-sm",children:w})]})]})})})]}):2===e?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-blue-50 to-purple-50 flex items-center justify-center p-4",children:[(0,r.jsx)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:(0,r.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 space-y-8",children:[(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)(o.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:200},className:"mx-auto bg-gradient-to-br from-blue-100 to-purple-100 rounded-full h-20 w-20 flex items-center justify-center",children:(0,r.jsx)(u.A,{className:"w-10 h-10 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-extrabold text-gray-800 mb-2",children:"Verify Your Number"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Enter the 6-digit code sent to ",s]})]})]}),(0,r.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-800",children:"Verification Code *"}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-2xl border border-blue-100",children:(0,r.jsx)("input",{type:"text",value:p,onChange:e=>g(e.target.value.replace(/\D/g,"")),maxLength:6,placeholder:"000000",className:"w-full text-center text-4xl font-mono font-bold tracking-widest bg-transparent outline-none text-gray-800",required:!0})}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Check your SMS for the code"})]}),(0,r.jsx)("button",{type:"submit",disabled:v||6!==p.length,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold py-4 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:v?(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{children:C})]}):"Verify & Login"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{t(1),g(""),k(""),l("+91")},className:"w-full text-emerald-600 hover:text-emerald-700 font-semibold py-3 rounded-xl hover:bg-emerald-50 transition-colors",children:"Change Phone Number"}),(0,r.jsx)("div",{className:"text-center",children:P>0?(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Resend code in ",(0,r.jsxs)("span",{className:"font-bold text-gray-700",children:[P,"s"]})]}):(0,r.jsx)("button",{type:"button",onClick:T,disabled:v,className:"text-sm text-blue-600 hover:text-blue-700 font-semibold disabled:opacity-50",children:"Didn't receive the code? Resend"})})]}),(0,r.jsx)("div",{className:"text-center text-sm text-gray-500",children:(0,r.jsx)("p",{children:"\xa9 2025 Shramic Networks Pvt Ltd."})})]})}),(0,r.jsx)(d.N,{children:w&&(0,r.jsx)(o.P.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-4 right-4 z-50 bg-red-500 text-white px-6 py-4 rounded-xl shadow-2xl max-w-md",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(x.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Error"}),(0,r.jsx)("p",{className:"text-sm",children:w})]})]})})})]}):3===e?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-red-50 flex items-center justify-center p-4",children:[(0,r.jsx)(o.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md",children:(0,r.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-12 space-y-8 text-center",children:[(0,r.jsx)(o.P.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"mx-auto bg-gradient-to-br from-amber-100 to-orange-100 rounded-full h-28 w-28 flex items-center justify-center",children:(0,r.jsx)(h.A,{className:"w-14 h-14 text-amber-600"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h2",{className:"text-4xl font-extrabold text-gray-800",children:"Account Under Review"}),(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"We're verifying your information"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 p-6 rounded-2xl border-2 border-amber-200 space-y-3",children:[(0,r.jsx)("p",{className:"text-gray-700",children:"Thank you for registering with Shramic! Your account is currently under review by our verification team."}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["This typically takes ",(0,r.jsx)("strong",{children:"24-48 hours"}),". Once approved, you'll be able to access your full dashboard."]})]}),(0,r.jsxs)(o.P.div,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,r.jsx)(o.P.div,{animate:{scale:[1,1.2,1]},transition:{duration:.6,repeat:1/0},className:"w-3 h-3 bg-amber-500 rounded-full"}),(0,r.jsx)(o.P.div,{animate:{scale:[1,1.2,1]},transition:{duration:.6,repeat:1/0,delay:.2},className:"w-3 h-3 bg-amber-500 rounded-full"}),(0,r.jsx)(o.P.div,{animate:{scale:[1,1.2,1]},transition:{duration:.6,repeat:1/0,delay:.4},className:"w-3 h-3 bg-amber-500 rounded-full"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Please wait..."})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200 space-y-2",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,r.jsx)("strong",{children:"Confirmation Email:"})," ",M]}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"We'll send you an email notification once your account is approved."})]}),(0,r.jsx)("button",{onClick:()=>{t(1),g(""),k(""),l("+91"),A(null),I("")},className:"w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-semibold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl",children:"Back to Login"}),(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Need help? Contact us at"}),(0,r.jsx)("a",{href:"mailto:support@shramic.com",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"support@shramic.com"})]}),(0,r.jsx)("div",{className:"text-center text-sm text-gray-500",children:(0,r.jsx)("p",{children:"\xa9 2025 Shramic Networks Pvt Ltd."})})]})}),(0,r.jsx)(d.N,{children:w&&(0,r.jsx)(o.P.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-4 right-4 z-50 bg-red-500 text-white px-6 py-4 rounded-xl shadow-2xl max-w-md",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(x.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Error"}),(0,r.jsx)("p",{className:"text-sm",children:w})]})]})})})]}):void 0}},6132:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6497:(e,t,s)=>{"use strict";s.d(t,{N:()=>b});var r=s(5155),a=s(2115),i=s(296),l=s(4416),n=s(6553),c=s(9686),o=s(1402),d=s(3127);function m(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class x extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,o.s)(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function u(e){let{children:t,isPresent:s,anchorX:i,root:l}=e,n=(0,a.useId)(),c=(0,a.useRef)(null),o=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=(0,a.useContext)(d.Q),h=function(...e){return a.useCallback(function(...e){return t=>{let s=!1,r=e.map(e=>{let r=m(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():m(e[t],null)}}}}(...e),e)}(c,null==t?void 0:t.ref);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:a,right:d}=o.current;if(s||!c.current||!e||!t)return;c.current.dataset.motionPopId=n;let m=document.createElement("style");u&&(m.nonce=u);let x=null!=l?l:document.head;return x.appendChild(m),m.sheet&&m.sheet.insertRule('\n          [data-motion-pop-id="'.concat(n,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===i?"left: ".concat(a):"right: ".concat(d),"px !important;\n            top: ").concat(r,"px !important;\n          }\n        ")),()=>{x.contains(m)&&x.removeChild(m)}},[s]),(0,r.jsx)(x,{isPresent:s,childRef:c,sizeRef:o,children:a.cloneElement(t,{ref:h})})}let h=e=>{let{children:t,initial:s,isPresent:i,onExitComplete:n,custom:o,presenceAffectsLayout:d,mode:m,anchorX:x,root:h}=e,f=(0,l.M)(p),y=(0,a.useId)(),g=!0,b=(0,a.useMemo)(()=>(g=!1,{id:y,initial:s,isPresent:i,custom:o,onExitComplete:e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;n&&n()},register:e=>(f.set(e,!1),()=>f.delete(e))}),[i,f,n]);return d&&g&&(b={...b}),(0,a.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[i]),a.useEffect(()=>{i||f.size||!n||n()},[i]),"popLayout"===m&&(t=(0,r.jsx)(u,{isPresent:i,anchorX:x,root:h,children:t})),(0,r.jsx)(c.t.Provider,{value:b,children:t})};function p(){return new Map}var f=s(5601);let y=e=>e.key||"";function g(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let b=e=>{let{children:t,custom:s,initial:c=!0,onExitComplete:o,presenceAffectsLayout:d=!0,mode:m="sync",propagate:x=!1,anchorX:u="left",root:p}=e,[b,j]=(0,f.xQ)(x),v=(0,a.useMemo)(()=>g(t),[t]),N=x&&!b?[]:v.map(y),w=(0,a.useRef)(!0),k=(0,a.useRef)(v),P=(0,l.M)(()=>new Map),[S,C]=(0,a.useState)(v),[E,R]=(0,a.useState)(v);(0,n.E)(()=>{w.current=!1,k.current=v;for(let e=0;e<E.length;e++){let t=y(E[e]);N.includes(t)?P.delete(t):!0!==P.get(t)&&P.set(t,!1)}},[E,N.length,N.join("-")]);let A=[];if(v!==S){let e=[...v];for(let t=0;t<E.length;t++){let s=E[t],r=y(s);N.includes(r)||(e.splice(t,0,s),A.push(s))}return"wait"===m&&A.length&&(e=A),R(g(e)),C(v),null}let{forceRender:M}=(0,a.useContext)(i.L);return(0,r.jsx)(r.Fragment,{children:E.map(e=>{let t=y(e),a=(!x||!!b)&&(v===E||N.includes(t));return(0,r.jsx)(h,{isPresent:a,initial:(!w.current||!!c)&&void 0,custom:s,presenceAffectsLayout:d,mode:m,root:p,onExitComplete:a?void 0:()=>{if(!P.has(t))return;P.set(t,!0);let e=!0;P.forEach(t=>{t||(e=!1)}),e&&(null==M||M(),R(k.current),x&&(null==j||j()),o&&o())},anchorX:u,children:e},t)})})}},6983:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])}},e=>{e.O(0,[135,965,551,941,441,493,358],()=>e(e.s=697)),_N_E=e.O()}]);