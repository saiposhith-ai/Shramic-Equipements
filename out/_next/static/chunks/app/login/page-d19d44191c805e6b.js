(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{697:(e,t,a)=>{Promise.resolve().then(a.bind(a,9743))},9743:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(5155),r=a(2115),i=a(2553),l=a(2078),n=a(9708),c=a(7260),d=a(1733),o=a(6497),x=a(1847);let m=(0,x.A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var h=a(6132),u=a(2529);let p=(0,x.A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),f=(0,l.Dk)().length?(0,l.Sx)():(0,l.Wp)({apiKey:"AIzaSyAYEG2XdbuQlGflMwppjtj54ur4jKs89-A",authDomain:"kaamon6363.firebaseapp.com",projectId:"kaamon6363",storageBucket:"kaamon6363.firebasestorage.app",messagingSenderId:"582122881331",appId:"1:582122881331:web:8fac47d3e8646e56a47e46",measurementId:"G-7GFJK5G724"}),y=(0,i.xI)(f),b=(0,n.aU)(f);function g(){let[e,t]=(0,r.useState)(1),[a,l]=(0,r.useState)("+91"),[x,f]=(0,r.useState)(""),[g,j]=(0,r.useState)(null),[N,v]=(0,r.useState)(!1),[w,k]=(0,r.useState)(""),[P,S]=(0,r.useState)(0),[C,E]=(0,r.useState)(""),[A,V]=(0,r.useState)(null),[T,_]=(0,r.useState)("");(0,c.useRouter)();let G=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(w){let e=setTimeout(()=>k(""),5e3);return()=>clearTimeout(e)}},[w]),(0,r.useEffect)(()=>{let e;return P>0&&(e=setTimeout(()=>S(P-1),1e3)),()=>clearTimeout(e)},[P]),(0,r.useEffect)(()=>{if(G.current&&!window.recaptchaVerifier)try{window.recaptchaVerifier=new i.kT(y,G.current,{size:"invisible"}),window.recaptchaVerifier.render()}catch(e){console.error("reCAPTCHA error:",e)}},[]);let I=async e=>{e.preventDefault(),k(""),v(!0),E("Sending verification code...");try{let e=a.replace(/[\s\-()]/g,"");e.startsWith("+")||(e=10===e.length?"+91".concat(e):"+".concat(e));let s=await (0,i.ik)(y,e,window.recaptchaVerifier);j(s),t(2),S(60)}catch(e){k(e.message||"Failed to send verification code. Please try again.")}finally{v(!1)}},W=async e=>{try{v(!0),E("Checking your account status...");let a=(0,n.rJ)(b,"equipments"),s=(0,n.P)(a,(0,n._M)("ownerPhoneNumber","==",e)),r=await (0,n.GG)(s);if(r.empty){k("No account found. Please register first."),t(1),v(!1);return}let i=r.docs[0].data(),l=i.status||"under_review",c=i.email||"";console.log("User status:",l,"Email:",c),"approved"===l?(v(!1),window.location.href="/dashboard"):(_(c),V(l),t(3),v(!1))}catch(e){console.error("Status check error:",e),k("Failed to check account status. Please try again."),t(1),v(!1)}},D=async e=>{e.preventDefault(),k(""),v(!0),E("Verifying code...");try{let e=(await g.confirm(x)).user.phoneNumber||"";await W(e)}catch(e){k("Invalid verification code. Please try again.")}finally{v(!1)}},L=async()=>{if(!(P>0)){k(""),v(!0),E("Resending code...");try{let e=a.replace(/[\s\-()]/g,"");e.startsWith("+")||(e=10===e.length?"+91".concat(e):"+".concat(e));let t=await (0,i.ik)(y,e,window.recaptchaVerifier);j(t),f(""),S(60)}catch(e){k(e.message||"Failed to resend verification code.")}finally{v(!1)}}};return 1===e?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-blue-50 to-purple-50 flex items-center justify-center p-4",children:[(0,s.jsx)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:(0,s.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 space-y-8",children:[(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)(d.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:200},className:"mx-auto bg-gradient-to-br from-emerald-100 to-blue-100 rounded-full h-20 w-20 flex items-center justify-center",children:(0,s.jsx)(m,{className:"w-10 h-10 text-emerald-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-extrabold bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent mb-2",children:"Welcome Back"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Sign in with your mobile number"})]})]}),(0,s.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-800",children:"Mobile Number *"}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-emerald-50 to-blue-50 p-6 rounded-2xl border border-emerald-100",children:(0,s.jsx)("input",{type:"tel",value:a,onChange:e=>l(e.target.value.replace(/[^\d+\-\s()]/g,"")),placeholder:"+91 98765 43210",className:"w-full bg-transparent text-lg font-medium outline-none placeholder-gray-400",required:!0})}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"We'll send a 6-digit verification code to this number"})]}),(0,s.jsx)("button",{type:"submit",disabled:N,className:"w-full bg-gradient-to-r from-emerald-600 to-blue-600 hover:from-emerald-700 hover:to-blue-700 text-white font-bold py-4 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:N?(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{children:C})]}):"Send Verification Code"})]}),(0,s.jsx)("div",{className:"text-center text-sm text-gray-500",children:(0,s.jsx)("p",{children:"\xa9 2025 Shramic Networks Pvt Ltd."})})]})}),(0,s.jsx)("div",{ref:G,className:"sr-only"}),(0,s.jsx)(o.N,{children:w&&(0,s.jsx)(d.P.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-4 right-4 z-50 bg-red-500 text-white px-6 py-4 rounded-xl shadow-2xl max-w-md",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(h.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Error"}),(0,s.jsx)("p",{className:"text-sm",children:w})]})]})})})]}):2===e?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-blue-50 to-purple-50 flex items-center justify-center p-4",children:[(0,s.jsx)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:(0,s.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 space-y-8",children:[(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)(d.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:200},className:"mx-auto bg-gradient-to-br from-blue-100 to-purple-100 rounded-full h-20 w-20 flex items-center justify-center",children:(0,s.jsx)(u.A,{className:"w-10 h-10 text-blue-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-extrabold text-gray-800 mb-2",children:"Verify Your Number"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Enter the 6-digit code sent to ",a]})]})]}),(0,s.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-800",children:"Verification Code *"}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-2xl border border-blue-100",children:(0,s.jsx)("input",{type:"text",value:x,onChange:e=>f(e.target.value.replace(/\D/g,"")),maxLength:6,placeholder:"000000",className:"w-full text-center text-4xl font-mono font-bold tracking-widest bg-transparent outline-none text-gray-800",required:!0})}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Check your SMS for the code"})]}),(0,s.jsx)("button",{type:"submit",disabled:N||6!==x.length,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold py-4 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:N?(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{children:C})]}):"Verify & Login"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{t(1),f(""),k(""),l("+91")},className:"w-full text-emerald-600 hover:text-emerald-700 font-semibold py-3 rounded-xl hover:bg-emerald-50 transition-colors",children:"Change Phone Number"}),(0,s.jsx)("div",{className:"text-center",children:P>0?(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Resend code in ",(0,s.jsxs)("span",{className:"font-bold text-gray-700",children:[P,"s"]})]}):(0,s.jsx)("button",{type:"button",onClick:L,disabled:N,className:"text-sm text-blue-600 hover:text-blue-700 font-semibold disabled:opacity-50",children:"Didn't receive the code? Resend"})})]}),(0,s.jsx)("div",{className:"text-center text-sm text-gray-500",children:(0,s.jsx)("p",{children:"\xa9 2025 Shramic Networks Pvt Ltd."})})]})}),(0,s.jsx)(o.N,{children:w&&(0,s.jsx)(d.P.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-4 right-4 z-50 bg-red-500 text-white px-6 py-4 rounded-xl shadow-2xl max-w-md",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(h.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Error"}),(0,s.jsx)("p",{className:"text-sm",children:w})]})]})})})]}):3===e?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-red-50 flex items-center justify-center p-4",children:[(0,s.jsx)(d.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md",children:(0,s.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-12 space-y-8 text-center",children:[(0,s.jsx)(d.P.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"mx-auto bg-gradient-to-br from-amber-100 to-orange-100 rounded-full h-28 w-28 flex items-center justify-center",children:(0,s.jsx)(p,{className:"w-14 h-14 text-amber-600"})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h2",{className:"text-4xl font-extrabold text-gray-800",children:"Account Under Review"}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"We're verifying your information"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 p-6 rounded-2xl border-2 border-amber-200 space-y-3",children:[(0,s.jsx)("p",{className:"text-gray-700",children:"Thank you for registering with Shramic! Your account is currently under review by our verification team."}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["This typically takes ",(0,s.jsx)("strong",{children:"24-48 hours"}),". Once approved, you'll be able to access your full dashboard."]})]}),(0,s.jsxs)(d.P.div,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,s.jsx)(d.P.div,{animate:{scale:[1,1.2,1]},transition:{duration:.6,repeat:1/0},className:"w-3 h-3 bg-amber-500 rounded-full"}),(0,s.jsx)(d.P.div,{animate:{scale:[1,1.2,1]},transition:{duration:.6,repeat:1/0,delay:.2},className:"w-3 h-3 bg-amber-500 rounded-full"}),(0,s.jsx)(d.P.div,{animate:{scale:[1,1.2,1]},transition:{duration:.6,repeat:1/0,delay:.4},className:"w-3 h-3 bg-amber-500 rounded-full"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Please wait..."})]}),(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200 space-y-2",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,s.jsx)("strong",{children:"Confirmation Email:"})," ",T]}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"We'll send you an email notification once your account is approved."})]}),(0,s.jsx)("button",{onClick:()=>{t(1),f(""),k(""),l("+91"),V(null),_("")},className:"w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-semibold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl",children:"Back to Login"}),(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Need help? Contact us at"}),(0,s.jsx)("a",{href:"mailto:support@shramic.com",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"support@shramic.com"})]}),(0,s.jsx)("div",{className:"text-center text-sm text-gray-500",children:(0,s.jsx)("p",{children:"\xa9 2025 Shramic Networks Pvt Ltd."})})]})}),(0,s.jsx)(o.N,{children:w&&(0,s.jsx)(d.P.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-4 right-4 z-50 bg-red-500 text-white px-6 py-4 rounded-xl shadow-2xl max-w-md",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(h.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Error"}),(0,s.jsx)("p",{className:"text-sm",children:w})]})]})})})]}):void 0}}},e=>{e.O(0,[135,965,240,544,441,493,358],()=>e(e.s=697)),_N_E=e.O()}]);